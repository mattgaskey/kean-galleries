<nav aria-label="main">
  <ul class="main-nav text-xl flex flex-col xl:flex-row xl:items-center {{ block ? 'space-y-7' : 'space-x-8 xl:space-x-10' }}">
    {% for link in main_nav_links %}
      {% set icon_class = link.below ? 'relative xl:pr-6 
          xl:after:bg-black
          xl:after:content-empty xl:after:mask-angle-bracket-right
          xl:after:absolute xl:after:right-0
          xl:after:top-7-px xl:after:w-3.5 xl:after:h-3.5' %}
      <li class="{{ block ? 'block' : 'inline' }} main-nav__link relative" data-dropdown-active="false">
        <a href="{{ link.url }}" class="{{ block ? 'block' : 'inline' }} {{ icon_class }} hover:underline">{{ link.title }}</a>
        
        {% if link.below %}
        {% set dropdown_id = link.title|clean_id ~ "-dropdown" %}
        <button class="absolute right-0 top-0 mr-2 w-7 h-7 main-nav__mobile-dropdown-trigger xl:hidden" aria-controls="{{ dropdown_id }}" aria-expanded="false">
          <svg class="center" width="9px" height="16px" viewbox="0 0 9 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <title>Menu Dropdown Trigger</title>
            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <g transform="translate(-961.000000, -259.000000)" fill="#101820" fill-rule="nonzero">
                <g transform="translate(0.000000, 137.000000)">
                  <g transform="translate(597.000000, 117.000000)">
                    <g transform="translate(289.000000, 0.000000)">
                      <path d="M75.4176209,20.9991579 C75.3107634,20.9991579 75.2039058,20.9578931 75.1220931,20.8762056 C74.9593023,20.7119886 74.9593023,20.4450307 75.1220931,20.2808137 L82.3399844,12.9996842 L75.1220931,5.71855468 C74.9593023,5.55433767 74.9593023,5.28737976 75.1220931,5.12316276 C75.2848838,4.95894575 75.5495231,4.95894575 75.7123139,5.12316276 L83.225733,12.7024093 C83.3885238,12.8666263 83.3885238,13.1335842 83.225733,13.2978012 L75.7123139,20.8770478 C75.6305011,20.9595774 75.5236436,21 75.4167861,21 L75.4176209,20.9991579 Z" id="Path-Copy-3"></path>
                    </g>
                  </g>
                </g>
              </g>
            </g>
          </svg>
        </button>
        <div class="dropdown" id="{{ dropdown_id }}">
          <ul class="text-xl bg-white mt-5 space-y-7 p-5">
            {% for dropdown_item in link.below %}
              <li>
                <a class="text-lg hover:underline" href="{{ dropdown_item.url }}">{{  dropdown_item.title }}</a>
              </li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}
      </li>
      
    {% endfor %}
    <li class="{{ block ? 'block w-full' : 'inline-block' }}">
      <form method="get" action="/search">
        <div class="flex flex-row-flex-no-wrap">
          <label class="sr-only" for="site-search">Search site</label>
          <input type="search" name="q" value="" id="site-search" placeholder="Search" class="p-4 flex-1 bg-cream">
          <button class="button bg-black text-white w-14 h-15" type="submit">
            <svg class="inline-block" width="19px" height="20px" viewBox="0 0 19 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <title>Search Button Icon</title>
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g transform="translate(-1346.000000, -258.000000)" fill="#FFFFFF" fill-rule="nonzero">
                  <g transform="translate(0.000000, 137.000000)">
                    <g transform="translate(1138.000000, 110.000000)">
                      <path d="M226.644859,30.162 L220.772143,23.678 C222.095308,22.277 222.822603,20.445 222.822603,18.5 C222.822603,16.497 222.051828,14.613 220.651586,13.197 C219.251344,11.781 217.390613,11 215.411302,11 C213.43199,11 211.570271,11.78 210.171017,13.197 C208.771764,14.614 208,16.497 208,18.5 C208,20.503 208.770775,22.387 210.171017,23.803 C211.571259,25.219 213.43199,26 215.411302,26 C217.116889,26 218.733541,25.421 220.043859,24.355 L225.916575,30.838 C226.014404,30.946 226.146819,31 226.281211,31 C226.40078,31 226.520349,30.957 226.615213,30.869 C226.816801,30.682 226.829647,30.366 226.645847,30.163 L226.644859,30.162 Z M208.987185,18.5 C208.987185,14.916 211.868699,12 215.410313,12 C218.951928,12 221.833442,14.916 221.833442,18.5 C221.833442,22.084 218.951928,25 215.410313,25 C211.868699,25 208.987185,22.084 208.987185,18.5 Z" id="Shape"></path>
                    </g>
                  </g>
                </g>
              </g>
            </svg>
            <span class="sr-only">Submit search</span>
          </button>
        </div>
      </form>
    </li>
  </ul>
</nav>